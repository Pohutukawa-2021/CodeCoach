(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{118:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(30),a=n.n(r),s=(n(70),n(71),n(4)),i=n(3),o=n(6),j=n(1);var u=function(){var e=Object(o.b)().loginWithRedirect;return Object(j.jsx)("button",{onClick:function(){return e()},children:"Log In"})};var l=function(){return Object(o.b)().isAuthenticated?Object(j.jsx)(i.a,{to:"/app/"}):Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"Hello"}),Object(j.jsx)(u,{})]})},d=n(7),b=n(2),O=n(13);var h=function(){var e=Object(b.c)((function(e){return e.usersOnline})),t=function(){var t=[];return Object.entries(e).forEach((function(e){var n=Object(O.a)(e,2),c=n[0],r=n[1];t.push(Object(j.jsx)("li",{id:r.auth_id,children:Object(j.jsx)(s.b,{to:"/app/messaging/".concat(r.id),children:Object(j.jsx)("img",{src:r.image_url,alt:r.username})})},c))})),t}();return Object(j.jsxs)("div",{children:[Object(j.jsx)("h3",{children:"Online Users"}),Object(j.jsx)("ul",{children:t})]})};var m=function(){var e=Object(o.b)().isAuthenticated;return e?Object(j.jsxs)("div",{children:[Object(j.jsx)(s.b,{to:"/app",className:"nav",children:"Home"}),Object(j.jsx)(s.b,{to:"/app/users",className:"nav",children:"Users"}),Object(j.jsx)(s.b,{to:"/app/messaging",className:"nav",children:"Messages"}),Object(j.jsx)(s.b,{to:"/app/createpost",className:"nav",children:"Ask a Question"}),Object(j.jsx)(s.b,{to:"/app/myprofile",className:"nav",children:"Avatar"})]}):e?void 0:Object(j.jsxs)("div",{children:[Object(j.jsx)(s.b,{to:"/",className:"nav",children:"Home"}),Object(j.jsx)(s.b,{to:"/",className:"nav",children:"Sign In"}),Object(j.jsx)(s.b,{to:"/",className:"nav",children:"Register"})]})},v=function(){var e=Object(o.b)().logout;return Object(j.jsx)("button",{onClick:function(){return e({returnTo:window.location.origin})},children:"Log Out"})};var x=function(){return Object(j.jsxs)("div",{className:"header-container",children:[Object(j.jsx)("span",{children:"Logo"}),Object(j.jsx)(m,{}),Object(j.jsx)(v,{})]})},f=n(19);var p=n(14),g=n(41),w=n(120);var y=function(){var e=Object(c.useState)(""),t=Object(O.a)(e,2),n=t[0],r=t[1],a=Object(b.b)(),s=Object(b.c)((function(e){return e.userAccount.id})),o=Object(i.g)().id,u=Object(b.c)((function(e){return e.messages[o]}));function l(){a({type:"setNewMessage",data:{id:Object(w.a)(),from:s,to:o,date:Date.now(),time:Date.now(),message:n}}),a({type:"server/sendMessage",data:{from:s+"",to:o,date:Date.now(),time:Date.now(),message:n}}),r("")}var d=void 0!==u?(console.log(u),Object(p.a)(new Set(u.map((function(e){return e.id})))).map((function(e){var t=u.find((function(t){return t.id==e}));return t.from===s&&(t.from=0),new g.Message({id:t.from,message:t.message})}))):[];return Object(j.jsxs)("div",{className:"chat",children:[Object(j.jsx)(g.ChatFeed,{messages:d,showSenderName:!0,bubblesCentered:!1,bubbleStyles:{text:{fontSize:30},chatbubble:{borderRadius:70,padding:40}}}),Object(j.jsx)("input",{onKeyDown:function(e){return function(e){13===e.keyCode&&""!==n&&l()}(e)},value:n,onChange:function(e){return r(e.target.value)}}),Object(j.jsx)("button",{onClick:function(){return l()},children:"Send"})]})};var N=function(e){return{type:"server/addComment",data:e}};function C(){var e=Object(b.c)((function(e){return e.posts})),t=Object(i.g)().postId,n=Number(t),r=e.find((function(e){return e.id===n})),a=Object(b.b)(),s=Object(c.useState)({comment:""}),o=Object(O.a)(s,2),u=o[0],l=o[1];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h1",{children:" Post "}),Object(j.jsx)("ul",{children:r.time}),Object(j.jsxs)("form",{className:"column-6",children:[Object(j.jsxs)("div",{className:"field",children:[Object(j.jsx)("label",{htmlFor:"firstName",className:"form-label",children:"Title"}),Object(j.jsx)("input",{name:"comment",value:u.comment,placeholder:"comment",onChange:function(e){var t=e.target,n=t.name,c=t.value;l(Object(f.a)({},n,c))}})]}),Object(j.jsx)("button",{type:"button",className:"button-primary",onClick:function(e){e.preventDefault(),a(N(u)),l({comment:""})},"data-testid":"submitButton",children:"Comment!"})]})]})}var k=function(){var e=Object(b.c)((function(e){return e.userAccount}));return Object(j.jsxs)("div",{className:"user-container",children:[Object(j.jsx)("img",{className:"avatar",src:e.image_url,alt:e.username}),Object(j.jsxs)("p",{children:["username: ",e.username]}),Object(j.jsxs)("p",{children:["Role: ",e.role]})]})};var S=function(){var e=Object(b.c)((function(e){return e.users}));return console.log(e),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h1",{children:"Hey"}),Object(j.jsx)("div",{className:"user-container",children:Object(j.jsx)("ul",{children:e.map((function(e){return Object(j.jsxs)("div",{children:[Object(j.jsx)("img",{className:"avatar",src:e.image_url,alt:e.username}),Object(j.jsxs)("p",{children:["username: ",e.username]}),Object(j.jsxs)("p",{children:["Role: ",e.role]})]},e.id)}))})})]})};var A=function(){var e,t=Object(b.b)(),n=Object(o.b)().user,c=Object(i.h)().path,r=Object(b.c)((function(e){return e.userAccount})),a=Object(b.c)((function(e){return e.waiting}));return a||""===r.email&&t(function(e){return{type:"server/sendUserDetails",data:e}}(Object(d.a)(Object(d.a)({},n),{},{name:(e=n.email,e.split("@")[0])}))),Object(j.jsx)("div",{children:a?Object(j.jsx)("div",{className:"spinner"}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(x,{}),Object(j.jsx)(h,{}),Object(j.jsxs)(i.d,{children:[Object(j.jsx)(i.b,{exact:!0,path:c,children:Object(j.jsx)("h1",{children:"Home"})}),Object(j.jsx)(i.b,{exact:!0,path:"".concat(c,"/messaging/:id"),children:Object(j.jsx)(y,{})}),Object(j.jsx)(i.b,{path:"".concat(c,"/post/:postId"),children:Object(j.jsx)(C,{})}),Object(j.jsx)(i.b,{path:"".concat(c,"/users"),children:Object(j.jsx)(S,{})}),Object(j.jsx)(i.b,{path:"".concat(c,"/myprofile"),children:Object(j.jsx)(k,{})})]})]})})},F=n(42),D=n.n(F),I=n(65),M=n(15),U=n(43),P=n.n(U),R=n(44),B=n.n(R);var H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return"hello"===t.type?(console.log("hello"),e):e};var L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"setUser"===t.type?Object(d.a)({},t.data):e};var T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setMessages":return t.data;case"setNewMessage":var n=t.data.to,c=Object(d.a)({},e);return void 0===c[n]?c[n]=[t.data]:c[n]=[].concat(Object(p.a)(c[n]),[t.data]),c;default:return e}};var q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"setOnlineUsers"===t.type?t.data:e};var W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"setAllUsers"===t.type?t.data:e};var _=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setWaiting":return!0;case"finishWaiting":return!1;default:return e}};var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setComment":return t.data;case"setNewComment":return[].concat(Object(p.a)(e),[t.data]);default:return e}};var J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setPosts":return t.data;case"addPosts":return[].concat(Object(p.a)(e),[t.data]);default:return e}},z=Object(M.b)({testReducer:H,userAccount:L,waiting:_,usersOnline:q,messages:T,posts:J,commentsByPost:E,users:W});function K(e){var t=e.children,n=Object(c.useState)(""),r=Object(O.a)(n,2),a=r[0],s=r[1],i=Object(o.b)(),u=i.getAccessTokenSilently;i.isAuthenticated;function l(){return(l=Object(I.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({audience:"http://CodeCouchSocket.com/api"});case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(Object(c.useEffect)((function(){!function(){l.apply(this,arguments)}()}),[]),""!==a){var d=B()("http://localhost:3000",{query:"token=".concat(a)}),h=P()(d,"server/"),m=Object(M.a)(h)(M.c)(z);return Object(j.jsx)(b.a,{store:m,children:t})}var v=B()("http://192.168.1.207:3001"),x=P()(v,"server/"),f=Object(M.a)(x)(M.c)(z);return Object(j.jsx)(b.a,{store:f,children:Object(j.jsx)("div",{className:"spinner"})})}var Q=Object(c.memo)(K);var Y=function(){return Object(j.jsx)(s.a,{children:Object(j.jsxs)(i.d,{children:[Object(j.jsx)(i.b,{exact:!0,path:"/",children:Object(j.jsx)(l,{})}),Object(j.jsx)(i.b,{path:"/app",children:Object(j.jsx)(Q,{children:Object(j.jsx)(A,{})})})]})})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,121)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};a.a.render(Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(o.a,{domain:"dev-ngqwdtsq.us.auth0.com",clientId:"F5zt73D2nJqsidW1kmelY4v2MduiO0gB",redirectUri:window.location.origin,audience:"http://CodeCouchSocket.com/api",children:Object(j.jsx)(Y,{})})}),document.getElementById("root")),G()},70:function(e,t,n){},71:function(e,t,n){}},[[118,1,2]]]);
//# sourceMappingURL=main.3a0a3d16.chunk.js.map